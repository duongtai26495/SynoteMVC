<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:replace="/fragments/header::header_user">
</head>
<body>
<div th:replace="/fragments/header::header_nav" class="header_top"></div>

 <div class="form-update-user col-md-6 offset-md-3 col-12 d-flex flex-column align-items-center">
        <h4 class="update-heading mt-3 text-white">Update user information</h4>
        <div class="form-wrapper col-12">
            <div class="update-image-profile col-12 col-md-4 offset-md-2">
                <div id="image-selected" class="user-image image-update m-auto" th:style="'background-image:url(/user/images/'+${user.username}+')'" >
                    <form action="" enctype="multipart/form-data">
                        <label id="label_upload"  for="img_avt" class="btn col-12 text-center pick-image text-white">
                            <i class="fa-solid fa-camera"></i> Select Image</label>
                        <input id="img_avt" type="file" onchange="uploadImage(this)"/>
                    </form>
                    
                </div>
            </div>
            <div class="col-12 col-md-4 update-content">
                <form th:action="@{/user/save_update}" class="update-form form-group d-flex flex-column mt-3" th:object="${user}" method="POST">
                	<input hidden th:value="${user.id}" name="id" />
                	
                    <input type="text" class="form-control" hidden name="username" th:value="${user.username}">
                    <input id="username_field" type="text" class="form-control" placeholder="Username" disabled th:value="${user.username}">
                    
                    <input type="text" class="form-control" placeholder="Full name" name="full_name" th:value="${user.full_name}">
                    <input type="email" class="form-control" placeholder="Email" name="email" th:value="${user.email}">
                    <select class="form-control" id="gender" th:value="${user.gender}" name="gender">
                        <option name="gender" hidden>Gender</option>
                        <option value="1" th:selected="${user.gender == 1}" >Male</option>
                        <option value="2" th:selected="${user.gender == 2}" >Female</option>
                        <option value="3" th:selected="${user.gender == 3}" >Unknown</option>
                    </select>
                    <input hidden id="url_image_selected" class="form-control" name="profile_image" />
                    <input type="password" class="form-control" name="password" placeholder="Password">
                    <input class="form-control btn btn-secondary mt-3 p-2" type="submit" name="submit" value="Save" />
                </form>
            </div>
        </div>
        <h4 class="result text-success" th:if="${result == 'success'}"><i class="fa-solid fa-face-laugh-wink"></i> User update success</h4>
        <h4 class="result text-warning" th:if="${result == 'failed'}"><i class="fa-solid fa-face-sad-cry"></i> User update failed</h4>
 </div>
</body>
</html>